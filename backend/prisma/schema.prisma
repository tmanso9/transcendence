// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Status {
  OFFLINE
  ONLINE
  IN_GAME
}

enum ConnectionStatus {
  PENDING
  ACCEPTED
}

enum Rank {
  GURU
  PRO
  NOOBIE
}

model Connections {
  id String @id @default(uuid())
  status ConnectionStatus @default(PENDING)
  creator String
  receiver String
}

model User {
  id String @id @default(uuid())
  createdAt DateTime @default(now())  // user creation time
  editedAt DateTime @updatedAt()  // last user edit
  email String @unique  // user email
  password String // hashed password
  username String @unique // username
  status Status // user status
  avatar String // user avatar
  rank Rank @default(NOOBIE) // player rank

  points Int @default(0)  // Total points of the user
  wins Int @default(0)  // Number of wins
  losses Int @default(0)  // Number of losses

  friends User[]  @relation("Friends") // array of friends
  friendOf User[]  @relation("Friends") // array of friends
}

model Blacklist {
  id String @id @default(uuid())
  token String @unique
  sub String
  email String
  expiresIn Int
  createdAt DateTime @default(now())
}